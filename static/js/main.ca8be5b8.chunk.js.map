{"version":3,"sources":["App.js","index.js"],"names":["DEFAULT_SIZES_REMS","useState","askIfYouVoted","setHasAsked","hasVoted","setHasVoted","window","document","location","search","substr","split","map","part","key","encoded","value","decodeURI","reduce","acc","val","setLocation","locationSize","setLocationSize","lastSize","useRef","locationInputRef","locationRef","locationWrapperRef","useEffect","history","replaceState","encodeURI","current","l","focus","height","clientHeight","parentHeight","nextSize","indexOf","className","href","onSubmit","e","preventDefault","htmlFor","type","onChange","target","id","placeholder","ref","onClick","style","fontSize","lineHeight","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ca8be5b8.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\n\nconst parseURL = () => {\n  return window.document.location.search\n    .substr(1)\n    .split(\"&\")\n    .map((part) => {\n      const [key, encoded] = part.split('=')\n      return {\n        key,\n        value: decodeURI(encoded),\n      };\n    })\n    .reduce((acc, val) => {\n      acc[val.key] = val.value\n      return acc;\n    }, {});\n}\n\nconst DEFAULT_SIZES_REMS = [8, 6, 4.5, 3.33, 3, 2.5, 2, 1.75, 1.5, 1, 0.75];\n\nexport default () => {\n  const [askIfYouVoted, setHasAsked] = useState(false);\n  const [hasVoted, setHasVoted] = useState(false);\n\n  const [location, setLocation] = useState(parseURL()?.location || \"\");\n  const [locationSize, setLocationSize] = useState(DEFAULT_SIZES_REMS[0]);\n  const lastSize = useRef(null);\n\n  const locationInputRef = useRef(null);\n  const locationRef = useRef(null);\n  const locationWrapperRef = useRef(null);\n\n  useEffect(() => {\n    window.history.replaceState(null, \"\", `?location=${encodeURI(location)}`);\n  }, [location]);\n\n  useEffect(() => {\n    // force the recalc of the text size on mount if location is already populated\n    if(locationRef.current) {\n      // this is super hacky, but append a space to `location`\n      // to get the effect below to run\n      setLocation( l => l ? l+\" \" : l);\n    }\n  }, [askIfYouVoted, locationRef, setLocation]);\n\n  useEffect(() => {\n    if (askIfYouVoted && locationInputRef.current) {\n        locationInputRef.current.focus();\n    }\n  }, [askIfYouVoted, locationInputRef])\n\n  useEffect(() => {\n    if(locationRef.current === null || locationWrapperRef.current === null) {\n      return;\n    }\n\n    const height = locationRef.current.clientHeight;\n    const parentHeight = locationWrapperRef.current.clientHeight;\n\n    if(!location) {\n      // if the text gets blanked, reset to the largest in the scale\n      setLocationSize(DEFAULT_SIZES_REMS[0])\n    } else if(height > parentHeight) {\n      // attempt to decrease the size to the next smallest size in the scale\n      const nextSize = DEFAULT_SIZES_REMS[DEFAULT_SIZES_REMS.indexOf(locationSize) + 1];\n      \n      if(nextSize) {\n        lastSize.current = locationSize;\n        setLocationSize(nextSize);\n      }\n    }\n\n  }, [location, setLocationSize, locationSize, locationRef, locationWrapperRef])\n\n  return (\n    <div className=\"App\">\n      <h1>Create your own \"I Voted\" sticker</h1>\n      {askIfYouVoted ? (\n        <>\n          <div className=\"ElectoralismAsATreat\">\n            {hasVoted ? \n              <h2>\n                Great! Customize your sticker:\n              </h2> : \n              <div>\n                Here's a <a href=\"https://www.usvotefoundation.org/\">resource</a> to help you register or find your polling place.\n                We'll let you try making a sticker in the meantime:\n              </div>\n            }\n          </div>\n          <form onSubmit={(e) => { e.preventDefault() }}>\n            <fieldset>\n              <label htmlFor=\"location\">\n                <h3>Where are you currently?</h3>\n              </label>\n              <div className=\"InputButtonWrapper\">\n                <input\n                  type=\"text\"\n                  value={location}\n                  onChange={e => setLocation(e.target.value)}\n                  id=\"location\"\n                  placeholder=\"your location\"\n                  ref={locationInputRef}\n                />\n                <button\n                  type=\"button\"\n                  className=\"ResetButton\"\n                  onClick={() => {\n                    setLocation(\"\");\n                    if (locationInputRef.current) {\n                      locationInputRef.current.focus();\n                    }\n                  }}\n                >\n                  Reset\n                </button>\n              </div>\n            </fieldset>\n          </form>\n          <div className=\"StickerWrapper\">\n            <div className=\"BigOval\">\n              <div className=\"StarsAndStripes\">\n                <div className=\"Stars\">\n                  <div className=\"Star\">\n                    <div className=\"Star-inner White\"></div>\n                  </div>\n                  <div className=\"Star\">\n                    <div className=\"Star-inner White\"></div>\n                  </div>\n                  <div className=\"Star\">\n                    <div className=\"Star-inner White\"></div>\n                  </div>\n                </div>\n                <div className=\"Stripes\">\n                  <div className=\"Stripe Red\"></div>\n                  <div className=\"Stripe\"></div>\n                  <div className=\"Stripe Red\"></div>\n                </div>\n              </div>\n              <div className=\"IVotedPreposition\">I Voted From</div>\n              <div className=\"LocationWrapper\" ref={locationWrapperRef}>\n                <div\n                  className=\"Location\"\n                  style={{\n                    fontSize: `${locationSize}rem`,\n                    lineHeight: `${locationSize}rem`\n                  }}\n                  ref={locationRef}\n                >\n                  {location}\n                </div>\n              </div>\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          <h2>But first: have you voted yet?</h2>\n          <div className=\"ElectoralismAsATreat\">\n            <button type=\"button\" className=\"VoteButton\" onClick={() => {\n              setHasAsked(true);\n              setHasVoted(true);\n            }}>\n              Yes!\n            </button>\n          </div>\n          <div className=\"ElectoralismAsATreat\">\n            <button type=\"button\" className=\"VoteButton\" onClick={() => {\n              setHasAsked(true);\n              setHasVoted(false);\n            }}>\n              Not Yet!\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}